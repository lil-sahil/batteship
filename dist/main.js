(()=>{"use strict";let e=()=>{let e={rows:[0,1,2,3,4,5,6,7,8,9].length,cols:[0,1,2,3,4,5,6,7,8,9].length},t=[],r={},o=e=>0===e.filter((e=>{if("-"===e)return e})).length;return{createGameboard:()=>{for(let t=0;t<e.rows;t++)r[`row_${t}`]=Array(e.cols).fill("");return r},placeShip:(t,n,i,a=horizontal)=>{let l=i.shipInfo.shipLength;if(!((t,n,i,a)=>{let l=[];if("vertical"==a){if(t+i>e.cols)return!1;for(let e=t;e<t+i;e++)l.push(r[`row_${e}`][n]);return!!o(l)}if("horizontal"===a){if(n+i>e.rows)return!1;for(let e=n;e<n+i;e++)l.push(r[`row_${t}`][e]);return!!o(l)}})(t,n,l,a))return!1;if("horizontal"===a){let e=r[`row_${t}`];r[`row_${t}`]=e.map(((e,r)=>r>=n&&r<n+l?(i.addShipCoordinate([t,r]),"-"):""))}else if("vertical"===a)for(let e=t;e<t+l;e++)r[`row_${e}`][n]="-",i.addShipCoordinate([e,n]);return r},attack:(e,r,o)=>{for(let o of t)if(o[0]===e&&o[1]===r)return!1;for(let t of o)for(let o of t.shipInfo.shipCoordinates)o[0]===e&&o[1]===r&&t.recieveAttack();t.push([e,r])},spotsPlayed:t,allSunk:e=>!(e.reduce(((e,t)=>!0===t.shipInfo.isSunk?e+1:!1===t.shipInfo.isSunk?e-1:void 0),0)<=0)}},t=e=>{let t={shipLength:e,isSunk:!1,shipCoordinates:[],hitsTaken:0},r=()=>t.hitsTaken>=e&&(t.isSunk=!0,!0);return{shipInfo:t,addShipCoordinate:e=>{t.shipCoordinates.push(e)},isSunk:r,recieveAttack:()=>{t.hitsTaken+=1,r()}}},r=e=>e[Math.floor(Math.random()*e.length)],o=(e,o)=>{let n=[];return{ships:n,initialSetUp:()=>(n=(()=>{for(let e in{carrier:5,Battleship:4,Cruiser:3,Submarine:3,Destroyer:2})n.push(t({carrier:5,Battleship:4,Cruiser:3,Submarine:3,Destroyer:2}[e]));return n})(),(()=>{if(e)for(let e of n){let t=r([0,1,2,3,4,5,6,7,8,9]),n=r([0,1,2,3,4,5,6,7,8,9]),i=r(["horizontal","vertical"]);for(;!1===o.placeShip(t,n,e,i);)t=r([0,1,2,3,4,5,6,7,8,9]),n=r([0,1,2,3,4,5,6,7,8,9]),i=r(["horizontal","vertical"])}})(),!0)}},n=document.querySelector("section#title"),i=(document.querySelector(".main-container"),document.querySelector("section#player-one")),a=document.querySelector("section#player-two"),l=(document.querySelector("section#information"),{renderComponent:()=>{n.appendChild((()=>{let e=document.createElement("div");return e.textContent="BattleShip",e})())}}),s=(()=>{let e=()=>{let e=document.createElement("div");e.classList.add("gameboard");let t=[0,1,2,3,4,5,6,7,8,9],r=[0,1,2,3,4,5,6,7,8,9];for(let o of t)for(let t of r){let r=document.createElement("div");r.classList.add("gameboard-cell"),r.setAttribute("data-row",o),r.setAttribute("data-col",t),e.appendChild(r)}return e};return{renderComponent:()=>{i.appendChild(e()),a.appendChild(e())}}})(),d=e=>{for(let t of e)for(let e of t.shipInfo.shipCoordinates)document.querySelectorAll("section#player-one .gameboard .gameboard-cell").forEach((t=>{parseInt(t.dataset.row)===e[0]&&parseInt(t.dataset.col)===e[1]&&(t.textContent="X")}))};(()=>{l.renderComponent(),s.renderComponent();let t=e(),r=e();t.createGameboard(),r.createGameboard();let n=o(!0,t),i=o(!0,r);n.initialSetUp(),i.initialSetUp(),d(n.ships)})()})();